CRITICAL PROJECT RULES (P0 - NEVER VIOLATE)
Project: ML - GameCreator Core + Netcode Integration
Generated: 2025-12-03 | Token Budget: ~1000 | Load Priority: CRITICAL

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROJECT OVERVIEW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Clean Unity project with GameCreator Core + official Netcode Integration:
â”œâ”€ GameCreator.Runtime.Core (Characters, Visual Scripting, Variables)
â”œâ”€ GameCreator.Netcode.Runtime (Network sync, RPCs, ownership)
â”œâ”€ Unity.Netcode.Runtime (Unity Netcode for GameObjects 2.x)
â””â”€ UNITY_NETCODE_2 define enabled

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. FILE ORGANIZATION (P0 - MANDATORY)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ZERO ROOT POLLUTION POLICY - Before creating ANY file, check:

âœ… ALLOWED AT ROOT (ONLY):
- .gitignore, .gitattributes, .editorconfig
- .claude.json, .mcp.json
- README.md, LICENSE
- *.sln, *.csproj (Unity/VS project files)

âŒ AUTO-REDIRECT REQUIRED:
AI reports/analysis     â†’ claudedocs/reports/
AI action items         â†’ claudedocs/action-items/
AI guides/tutorials     â†’ claudedocs/guides/
User documentation      â†’ docs/
Temporary files         â†’ .temp/ (gitignored)
Tests                   â†’ Assets/Tests/ or tests/
Scripts                 â†’ scripts/

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2. NETWORK ARCHITECTURE (P0 - CORE PATTERNS)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ NetworkCharacterAdapter - Primary bridge component
   â”œâ”€ Bridges GameCreator Character â†” Unity NetworkBehaviour
   â”œâ”€ Manages IsNetworkSpawned lifecycle
   â”œâ”€ Provides IsLocalPlayer: IsOwner && Character.IsPlayer
   â””â”€ Located: GameCreator.Netcode.Runtime.NetworkCharacterAdapter

âœ… Ownership Pattern:
   if (IsOwner) { /* local player logic */ }
   if (networkCharacterAdapter.IsLocalPlayer) { /* alternative */ }

âœ… Spawn Lifecycle:
   OnNetworkSpawn() â†’ BecomeLocalPlayer() or BecomeRemotePlayer()
   OnNetworkDespawn() â†’ Cleanup

âœ… Variables Sync:
   NetworkVariablesSync.SetFloat("name", value)
   NetworkVariablesSync.GetFloat("name", defaultValue)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3. RPC PATTERNS (Netcode 2.x Syntax)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

NEW Rpc Attribute (PREFERRED):
â”œâ”€ [Rpc(SendTo.Server)] - Client â†’ Server
â”œâ”€ [Rpc(SendTo.Everyone)] - Server â†’ All Clients
â”œâ”€ [Rpc(SendTo.Owner)] - Server â†’ Owner only
â”œâ”€ [Rpc(SendTo.NotOwner)] - Server â†’ Everyone except owner
â””â”€ RequireOwnership = false for non-owner requests

Example:
[Rpc(SendTo.Server, RequireOwnership = false)]
private void RequestOwnershipRpc(RpcParams rpcParams = default)
{
    ulong senderId = rpcParams.Receive.SenderClientId;
    // Server validates and processes
}

LEGACY (Still Supported):
â”œâ”€ [ServerRpc] - Must end with "ServerRpc"
â”œâ”€ [ClientRpc] - Must end with "ClientRpc"
â””â”€ Custom structs: Must implement INetworkSerializable

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4. GAMECREATOR VISUAL SCRIPTING (P0 - STRICT SIGNATURES)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Instructions: protected override Task Run(Args args)
Conditions:   protected override bool Check(Args args)
âŒ NO CancellationToken, NO other parameters!

Key Instructions:
â”œâ”€ InstructionNetworkStartHost / StartClient
â”œâ”€ InstructionNetworkSpawnPlayer / Despawn
â”œâ”€ InstructionNetworkChangeOwnership
â””â”€ InstructionNetworkDisconnect

Key Conditions:
â”œâ”€ ConditionNetworkIsHost / IsClient / IsServer
â”œâ”€ ConditionNetworkIsOwner / IsLocalPlayer
â””â”€ ConditionNetworkIsConnected / IsSpawned

Key Triggers:
â”œâ”€ EventNetworkOnClientConnected / Disconnected
â”œâ”€ EventNetworkOnLocalPlayerSpawned
â”œâ”€ EventNetworkOnNetworkSpawn / Despawn
â””â”€ EventNetworkOnOwnershipChanged

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5. SYMBOL REFERENCES (Quick Navigation)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SERENA MEMORIES:
â”œâ”€ .serena/memories/critical_rules.md (This content, detailed)
â”œâ”€ .serena/memories/project_structure.md (Project layout)
â”œâ”€ .serena/memories/TOOLS/003_openspec_workflow.md (Spec-driven dev)
â””â”€ .serena/memories/TOOLS/008_openspec_serena_integration.md

SERENA PERSONAS:
â”œâ”€ .serena/personas/character-core.llm.txt (Character module)
â”œâ”€ .serena/personas/netcode-core.llm.txt (Netcode integration)
â””â”€ .serena/personas/_index.llm.txt (Module index)

OPENSPEC:
â”œâ”€ openspec/AGENTS.md (OpenSpec workflow guide)
â”œâ”€ openspec/changes/ (Active change proposals)
â””â”€ openspec/.decision-trees/ (Network decision trees)

DECISION TREES:
â”œâ”€ network-sync-method.yaml - Choose sync approach
â”œâ”€ gc-character-sync.yaml - Character networking
â””â”€ schema.yaml - Decision tree schema

SYMBOL MAPS:
â”œâ”€ .serena/symbols/assemblies.json (Unity assemblies)
â””â”€ .serena/symbols/gamecreator_modules.json (GC modules)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6. CRITICAL CONSTRAINTS (NEVER VIOLATE)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… ALWAYS:
- Use NetworkCharacterAdapter for character networking
- Check IsOwner before local player logic
- Use [Rpc(SendTo.X)] for new RPCs
- Implement OnNetworkSpawn/OnNetworkDespawn properly
- Use Task Run(Args args) signature for Instructions (no CT)
- Reference GameCreator.Netcode.Runtime namespace

âŒ NEVER:
- Create unauthorized files at project root
- Add CancellationToken to Instruction.Run()
- Skip ownership checks in multiplayer code
- Bypass file organization rules
- Ignore OnNetworkSpawn lifecycle

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7. ASSEMBLY QUICK REFERENCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

GameCreator.Runtime.Core
â”œâ”€ Namespace: GameCreator.Runtime.Core
â”œâ”€ Character, Args, Instructions, Conditions
â””â”€ Dependencies: InputSystem, TextMeshPro, Collections, Mathematics

GameCreator.Netcode.Runtime
â”œâ”€ Namespace: GameCreator.Netcode.Runtime
â”œâ”€ NetworkCharacterAdapter, NetworkCharacter, NetworkVariablesSync
â”œâ”€ All network Instructions, Conditions, Triggers
â””â”€ Dependencies: GameCreator.Runtime.Core, Unity.Netcode.Runtime

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
END OF CRITICAL CONTEXT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Next: Load task-specific memories based on user intent
