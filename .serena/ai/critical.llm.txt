CRITICAL PROJECT RULES (P0 - NEVER VIOLATE)
Project: ML - GameCreator Core + Netcode + Perception
Generated: 2025-12-04 | Token Budget: ~1200 | Load Priority: CRITICAL

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROJECT OVERVIEW
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Unity project with GameCreator Core + Netcode + Perception:
â”œâ”€ GameCreator.Runtime.Core (Characters, Visual Scripting, Variables)
â”œâ”€ GameCreator.Runtime.Perception (AI senses, awareness, evidence)
â”œâ”€ GameCreator.Netcode.Runtime (Network sync, RPCs, ownership)
â”œâ”€ Unity.Netcode.Runtime (Unity Netcode for GameObjects 2.x)
â””â”€ UNITY_NETCODE_2 define enabled

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. FILE ORGANIZATION (P0 - MANDATORY)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ZERO ROOT POLLUTION POLICY:

âœ… ALLOWED AT ROOT: .gitignore, .claude.json, .mcp.json, README.md, *.sln

âŒ AUTO-REDIRECT:
AI reports     â†’ claudedocs/reports/
AI guides      â†’ claudedocs/guides/
User docs      â†’ docs/
Temp files     â†’ .temp/

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2. NETWORK ARCHITECTURE (P0 - CORE PATTERNS)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ NetworkCharacterAdapter - Primary bridge component
   â”œâ”€ Bridges GameCreator Character â†” Unity NetworkBehaviour
   â”œâ”€ Manages IsNetworkSpawned lifecycle
   â”œâ”€ IsLocalPlayer: IsOwner && Character.IsPlayer
   â””â”€ Namespace: GameCreator.Netcode.Runtime

âœ… Ownership Pattern:
   if (IsOwner) { /* local player logic */ }

âœ… Spawn Lifecycle:
   OnNetworkSpawn() â†’ BecomeLocalPlayer() or BecomeRemotePlayer()

âœ… Variables Sync:
   NetworkVariablesSync.SetFloat("name", value)
   NetworkVariablesSync.GetFloat("name", defaultValue)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3. PERCEPTION MODULE (AI SENSES)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Key Components (GameCreator.Runtime.Perception):
â”œâ”€ Perception - Main AI perception component
â”œâ”€ Cortex - Awareness tracking (Trackers per target)
â”œâ”€ Tracker - Per-target awareness (0-1 float, AwareStage)
â”œâ”€ Sensors: SensorSee, SensorHear, SensorSmell, SensorFeel
â”œâ”€ Evidence - Investigation targets
â””â”€ Environment: Luminance, Camouflage, Din

Awareness Stages:
â”œâ”€ None (0-0.25) â†’ Suspicious (0.25-0.5)
â”œâ”€ Alert (0.5-0.75) â†’ Aware (0.75-1.0)

âš ï¸ NETWORK STATUS: Local-only (network integration PLANNED)
   OpenSpec: add-perception-netcode-integration (0/64 tasks)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4. RPC PATTERNS (Netcode 2.x Syntax)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[Rpc(SendTo.Server)] - Client â†’ Server
[Rpc(SendTo.Everyone)] - Server â†’ All Clients
[Rpc(SendTo.Owner)] - Server â†’ Owner only

Example:
[Rpc(SendTo.Server, RequireOwnership = false)]
private void RequestRpc(RpcParams rpcParams = default)
{
    ulong senderId = rpcParams.Receive.SenderClientId;
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5. GAMECREATOR VISUAL SCRIPTING (P0 - STRICT SIGNATURES)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Instructions: protected override Task Run(Args args)
Conditions:   protected override bool Check(Args args)
âŒ NO CancellationToken, NO other parameters!

Key Perception VS:
â”œâ”€ InstructionPerceptionEmitNoise
â”œâ”€ InstructionPerceptionAwarenessAdd
â”œâ”€ ConditionPerceptionCanSee
â”œâ”€ ConditionPerceptionAwareStage
â”œâ”€ EventPerceptionOnAwarenessStage
â””â”€ EventPerceptionOnHear

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6. SYMBOL REFERENCES (Quick Navigation)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SERENA MEMORIES:
â”œâ”€ .serena/memories/critical_rules.md (Detailed patterns)
â”œâ”€ .serena/memories/project_structure.md (Project layout)
â”œâ”€ .serena/memories/CRITICAL/ (4 critical files)
â””â”€ .serena/memories/TOOLS/008_openspec_serena_integration.md

SERENA PERSONAS:
â”œâ”€ .serena/personas/character-core.llm.txt
â”œâ”€ .serena/personas/netcode-core.llm.txt
â”œâ”€ .serena/personas/perception.llm.txt
â””â”€ .serena/personas/_index.llm.txt

OPENSPEC:
â”œâ”€ openspec/AGENTS.md (Workflow guide)
â”œâ”€ openspec/changes/ (Active proposals)
â”œâ”€ openspec/changes/add-perception-netcode-integration/ (ACTIVE)
â””â”€ openspec/.decision-trees/ (Decision trees)

SYMBOL MAPS:
â”œâ”€ .serena/symbols/assemblies.json
â””â”€ .serena/symbols/gamecreator_modules.json

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7. CRITICAL CONSTRAINTS (NEVER VIOLATE)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… ALWAYS:
- Use NetworkCharacterAdapter for character networking
- Check IsOwner before local player logic
- Use [Rpc(SendTo.X)] for new RPCs
- Use Task Run(Args args) signature (no CT)
- Reference correct namespace for each module

âŒ NEVER:
- Create files at project root
- Add CancellationToken to Instruction.Run()
- Skip ownership checks in multiplayer code
- Assume Perception is network-synced (it's NOT yet)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
8. ASSEMBLY QUICK REFERENCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

GameCreator.Runtime.Core
â””â”€ Character, Args, Instructions, Conditions

GameCreator.Runtime.Perception
â””â”€ Perception, Cortex, Tracker, Sensors, Evidence
â””â”€ Dependencies: GameCreator.Runtime.Core

GameCreator.Netcode.Runtime
â””â”€ NetworkCharacterAdapter, NetworkCharacter, NetworkVariablesSync
â””â”€ Dependencies: GameCreator.Runtime.Core, Unity.Netcode.Runtime

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
END OF CRITICAL CONTEXT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Next: Load task-specific personas based on user intent
For Perception network work: Read openspec/changes/add-perception-netcode-integration/
