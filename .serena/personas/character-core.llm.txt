======================================================================
GAMECREATOR CORE - CHARACTER MODULE SCHEMA
======================================================================
Project: ML - GameCreator Core + Netcode
Generated: 2025-12-03
Assembly: GameCreator.Runtime.Core

----------------------------------------------------------------------
OVERVIEW
----------------------------------------------------------------------

The Character module is the foundation of GameCreator. It provides:
- Character component with movement, animation, states
- IsPlayer flag for local player identification
- Args system for passing context to Instructions/Conditions
- Visual Scripting base classes

----------------------------------------------------------------------
KEY CLASSES
----------------------------------------------------------------------

Character (Component)
├── IsPlayer: bool - True if this is the local player
├── IsAlive: bool - Character alive state
├── Busy: bool - Character is busy
├── Motion - Movement subsystem
├── Animim - Animation subsystem
└── States - State machine

Args (Context Container)
├── Self: GameObject - The object running the action
├── Target: GameObject - The target of the action
├── ComponentFromTarget<T>() - Get component from target
└── Clone() - Create a copy of args

Instruction (Visual Scripting Base)
├── protected override Task Run(Args args)
├── NO CancellationToken parameter!
└── Return DefaultResult for synchronous completion

Condition (Visual Scripting Base)
├── protected override bool Check(Args args)
└── Return true/false

Trigger (Event System)
├── EventRunner for executing instructions
├── Various event sources (OnStart, OnUpdate, etc.)
└── Conditions for filtering

----------------------------------------------------------------------
VISUAL SCRIPTING SIGNATURES
----------------------------------------------------------------------

INSTRUCTION:
```csharp
using GameCreator.Runtime.Common;
using GameCreator.Runtime.VisualScripting;

[Title("My Instruction")]
[Category("Custom")]
public class InstructionMyAction : Instruction
{
    protected override Task Run(Args args)
    {
        // Your logic here
        return DefaultResult;
    }
}
```

CONDITION:
```csharp
using GameCreator.Runtime.Common;
using GameCreator.Runtime.VisualScripting;

[Title("My Condition")]
[Category("Custom")]
public class ConditionMyCheck : Condition
{
    protected override bool Check(Args args)
    {
        return someCondition;
    }
}
```

----------------------------------------------------------------------
CHARACTER ACCESS PATTERNS
----------------------------------------------------------------------

Getting Character from Args:
```csharp
Character character = args.Target?.GetComponent<Character>();
if (character != null && character.IsPlayer)
{
    // This is the local player
}
```

Character Properties:
```csharp
character.IsPlayer  // True if local player
character.IsAlive   // True if alive
character.Busy      // True if busy
```

----------------------------------------------------------------------
INTEGRATION WITH NETCODE
----------------------------------------------------------------------

When used with GameCreator.Netcode.Runtime:

1. NetworkCharacter extends Character with:
   - IsNetworkSpawned: bool
   - BecomeLocalPlayer()
   - BecomeRemotePlayer()

2. NetworkCharacterAdapter bridges Character ↔ NetworkBehaviour

3. Ownership check pattern:
   ```csharp
   var adapter = character.GetComponent<NetworkCharacterAdapter>();
   if (adapter.IsOwner)
   {
       // This client owns this character
   }
   ```

----------------------------------------------------------------------
RELATED FILES
----------------------------------------------------------------------

- .serena/personas/netcode-core.llm.txt (Network integration)
- .serena/memories/critical_rules.md (Patterns reference)
- openspec/specs/character-system/spec.md (Requirements)
